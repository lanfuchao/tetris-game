# 更新日志

## v2.3.0 - 2026-02-10

### 国际化支持 🌍
- ✨ 完整的中英文双语支持
- 🌐 新增语言切换按钮
- 💾 语言偏好自动保存到 localStorage
- 📝 所有界面元素完全国际化
  - 游戏界面（按钮、标签、状态）
  - 模态弹窗（帮助、游戏结束、游戏记录）
  - 按钮提示文字（title 属性）
  - 虚拟控制按钮
  - 动态内容（难度名称、方块类型名称）

### 方块系统改进 🎮
- ✨ 新增三种方块类型选择
  - 3格方块（Tromino）- 简单模式，2种形状
  - 4格方块（Tetromino）- 经典模式，7种形状
  - 5格方块（Pentomino）- 挑战模式，8种简化形状
- 🔄 5格方块简化为更易操作的形状（I/T/L/J及其变体）
- 🎨 方块类型切换按钮，支持游戏前选择
- ✨ 特殊穿透方块系统
  - 金色钻石外观，8层视觉效果
  - 可穿透其他方块直到无空格
  - 不同难度和方块类型有不同出现概率

### 通关系统 🎯
- 🏆 新增50级通关机制
- 🎉 精美的胜利界面
- 📊 通关记录永久保存
- 📈 通关次数统计

### 游戏记录系统 📊
- 📝 自动保存每局游戏数据到 localStorage
- 🔍 按难度筛选游戏记录
- 📊 统计通关次数
- 🗑️ 支持清空记录功能
- 📈 详细信息展示（分数、等级、时长、通关状态）

### UI/UX 改进
- ✨ Game Over 模态框新增关闭按钮
- 📱 虚拟控制按钮添加提示文字支持
- 🎨 方块类型选择器界面
- 🔄 难度和方块类型显示本地化

### 技术改进
- 📦 新增 `i18n.ts` 模块
  - `I18n` 类管理语言切换
  - `Translation` 接口定义翻译结构
  - `Language` 枚举（ZH_CN, EN）
- 📦 新增 `blockShapes.ts` 模块
  - 分离方块形状定义
  - `TROMINO_SHAPES`, `TETROMINO_SHAPES`, `PENTOMINO_SHAPES`
  - `BLOCK_COLORS` 颜色配置
- 📦 新增 `records.ts` 模块
  - `GameRecord` 接口
  - `RecordsManager` 类管理记录
- 🎨 批量更新机制
  - 使用 `data-i18n` 属性声明式翻译
  - 使用 `data-i18n-title` 属性国际化提示文字
  - `updateAllTexts()` 和 `updateModalTexts()` 方法
- 🎨 深拷贝保护，避免意外修改方块形状
- 🎨 特殊方块渲染系统（8层视觉效果）

### 文档
- 📖 更新 README.md - 完整的功能说明和使用指南
- 📝 详细的方块类型、难度、通关系统说明
- 🚀 快速开始指南和部署说明
- 🎮 操作说明（键盘和虚拟按键）

## v2.2.1 - 2026-02-06

### 新增功能 ✨
- 🔄 添加"重新开始"按钮，可重新选择难度
- 📱 全面优化移动端和平板显示
- 🔄 橙色警告按钮样式

### 响应式改进 📱
- 📱 手机适配（≤480px）
  - Canvas 缩小为 240x480
  - 字体和按钮缩小
  - 模态框占满 95% 屏幕
- 🖥️ 平板竖屏适配（481-768px）
  - Canvas 280x560
  - 侧边栏横向布局
  - 信息框自适应分列
- 📐 平板横屏适配（769-1024px）
  - 紧凑间距和尺寸
- 🔄 横屏模式优化
  - 自动切换为横向布局
  - Canvas 调整为 200x400
- 📲 超小屏优化（≤360px）
  - Canvas 210x420
  - 最小化所有尺寸

### 交互改进
- 游戏中可随时点击重新开始
- 重置后自动恢复到普通难度
- 所有按钮禁用/启用状态优化

## v2.2.0 - 2026-02-06

### UI/UX 重大改进 🎨
- ✨ 紧凑型信息面板设计，节省 54% 垂直空间
- 🎯 得分和等级合并为横向布局
- 🎛️ 难度选择简化为单字按钮（简/普/难）
- 💬 控制说明改为模态弹窗
- 🎮 游戏结束界面改为精美模态框
- 🔘 新增帮助按钮 (?) 打开控制说明

### 视觉设计优化
- 渐变按钮样式，添加阴影和光晕
- 按钮悬停上浮动画效果
- 模态框淡入动画
- 自定义滚动条样式
- 响应式布局优化

### 交互改进
- 点击模态框外部关闭
- ESC 键关闭弹窗（待实现）
- 工具提示显示详细信息
- 更好的视觉反馈

### 技术改进
- 模态框系统 (`showModal/closeModal`)
- CSS Grid 布局优化
- 硬件加速动画
- 更好的浏览器兼容性

### 文档
- 📖 新增 UI_IMPROVEMENTS.md - 详细的 UI 改进说明

## v2.1.0 - 2026-02-06

### 新增功能 🎉
- ✨ 添加三种难度模式（简单、普通、困难）
- 📈 全新的速度曲线算法（指数衰减替代线性）
- 🎯 不同难度的分数倍率系统
- 🎚️ 可视化难度选择界面
- 📊 难度相关的升级门槛

### 算法改进
- 使用指数衰减公式: `speed = initialSpeed × decayRate^(level-1)`
- 简单模式: 衰减率 0.92，最低 200ms
- 普通模式: 衰减率 0.88，最低 120ms
- 困难模式: 衰减率 0.85，最低 80ms

### 游戏平衡
- 简单模式: 1.0x 分数，1200分/级
- 普通模式: 1.5x 分数，1000分/级
- 困难模式: 2.0x 分数，800分/级

### 技术改进
- 新增 `difficulty.ts` 模块
- 扩展类型定义（Difficulty 枚举）
- 改进游戏状态管理
- 添加难度配置系统

### 文档
- 📖 新增 DIFFICULTY_SYSTEM.md - 详细的难度系统说明
- 更新 README.md 包含难度说明

## v2.0.0 - 2026-02-06

### 重大重构 🎉
- ✨ 完全使用 TypeScript 重写
- 📦 集成 Webpack 5 构建系统
- 🎨 分离 CSS 样式到独立文件
- 🏗️ 模块化代码架构

### 新增功能
- 🔧 添加开发服务器支持（热重载）
- 📜 添加快速启动脚本 (start.sh)
- 🚀 添加部署脚本 (deploy.sh)
- 🤖 添加 GitHub Actions 自动部署
- 📚 完善项目文档

### 技术改进
- 🎯 完整的 TypeScript 类型定义
- 🎨 更好的代码组织结构
- ⚡ 生产构建优化
- 🔒 添加 .gitignore
- 📦 使用 npm 管理依赖

### 项目结构
```
src/
├── utils/
│   ├── audio.ts       # 音效管理器
│   └── renderer.ts    # 渲染引擎
├── styles/
│   └── main.css       # 样式文件
├── config.ts          # 游戏配置
├── types.ts           # 类型定义
├── game.ts            # 游戏核心
└── main.ts            # 入口文件
```

### 文档
- 📖 README.md - 项目说明
- 🚀 QUICK_START.md - 快速开始
- 🏗️ PROJECT_STRUCTURE.md - 架构说明
- 📝 CHANGELOG.md - 更新日志

## v1.0.0 - 2026-02-06

### 初始版本
- 🎮 基础俄罗斯方块游戏
- 🎵 Web Audio API 音效系统
- 📊 得分和等级系统
- ⌨️ 键盘控制支持
- 🎨 渐变背景设计
